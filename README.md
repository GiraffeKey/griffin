# griffin

A peer-to-peer document-oriented database. Take back ownership over your data!

Griffin is a decentralized database powered by [GUN](https://github.com/amark/gun) that implements an API and query language similar to MongoDB. All data stored is automatically encrypted and distributed over a peer-to-peer network and can optionally be shared with others. It is a truly powerful database solution.

You have zero chance of ever losing your data. You start out with localStorage. When localStorage fails, you can attempt to pull data from the WebRTC network or the storage relay you last used. When the relay goes down or the browsers storing your data go offline, you can pull data from Sia SkynetDB as the browser version uses [Zenbase](https://github.com/Fluffy9/Zenbase). And if all else fails, you can pull data from other relays in the network as a Kademlia DHT that all Griffin relays have access to is used to back everything up as well.

Seems overkill? That's because it is. But it is extremely important that users NEVER lose ANY of their data EVER. Griffin empowers developers with limited resources with a never failing backup plan so that even people living in their mother's basement can create production ready decentralized applications without headache.

Notice: Much of what is promised has not been implemented or tested. This project is in an experimental state and primarily intended for personal use cases right now. After experimenting with real world apps and use cases I will make the project more unopinionated and open to the public.

## Usage

`yarn add griffin-browser` or `yarn add griffin-nodejs`

```js
import Griffin from "griffin-browser"

const griffin = Griffin({
	skynet: {
		secret: "MY_SECRET",
		portal: "https://siasky.net",
	},
})

await griffin.create("username", "password", {
	skynet: ..., // the user's personal skynet secret & portal
}, false) // false means you do not require unique usernames

await griffin.auth("username", "password")

const db = griffin.namespace("my-app")
const app_specific_key = await db.gen() // This is an optional 12 word mnemonic generated by the user
await db.auth(app_specific_key)

const dogs = await db.collection("dogs")

await dogs.insert([
	{ name: "Gordon", color: "black", age: 3, owners: ["John", "Cindy"] },
	{ name: "Pooch", color: "brown", age: 5, owners: ["John", "Cindy"] },
	{ name: "Snuffles", color: "brown", age: 7, owners: ["Karen"] },
	...
]).many()

console.log(await dogs.find({ color: "brown" }).sort({ name: 1 }).one())
console.log(await dogs.find({ name: { $or: ["Gordon", "Pooch"] } }).fields({ _id: 0 }).many())
console.log(await dogs.find({ age: { $lt: 7, $gte: 3 } }).limit(10).many())

await dogs.update({ age: 5 }, { $inc: { age: 1 } }).one()
await dogs.replace({ name: "Gordon" }, { name: "Gordon Ramsey", color: "blonde", age: 54, owners: null })
```

## Contributing to the network

Adding new relays to the network is incredibly helpful. In addition to being used for WebRTC connections, Griffin relays will also automatically connect to a peer-to-peer network and be used regularly for additional backup. Relays with S3 based storage enabled are especially helpful.

```js
import Griffin from "griffin-browser"

Griffin.server({
	s3: {
		key: "",
    	secret: "",
    	bucket: "",
	},
})
```

## Donations

Feel free to donate! I plan on implementing the entire MongoDB API, a file storage API based on Sia/Skynet and other features involving shared data.

I can work on this much more frequently with a more sustainable income. All donations will go to living expenses, assets, servers and Sia file storage costs (I plan on running my own Skynet portal).

Liberapay: https://liberapay.com/giraffekey/
